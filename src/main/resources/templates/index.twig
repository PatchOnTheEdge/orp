<!DOCTYPE html>
<html>
    <head>
        <link href="http://getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="http://getbootstrap.com/examples/justified-nav/justified-nav.css" rel="stylesheet">

        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/smoothie/1.27.0/smoothie.js"
                charset="utf-8">
        </script>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.js"></script>


        <style>
        </style>
    </head>
    <body>
        {#<h4>CPU</h4>#}
        {#<canvas id="cpu" width="600" height="400"></canvas>#}
        <h4>Throughput (request/s)</h4>
        <canvas id="throughput" width="600" height="400"></canvas>
        <script>
//            var cpuChart = new SmoothieChart({millisPerPixel:100,maxValue:1,minValue:0});
//            cpuChart.streamTo(document.getElementById("cpu"), 1000);

            var throughputChart = new SmoothieChart({millisPerPixel:100,minValue:0});
            throughputChart.streamTo(document.getElementById("throughput"), 1000);

//            var cpuLine = new TimeSeries();

            var throughputLine1 = new TimeSeries();
            var throughputLine2 = new TimeSeries();

            // Add a random value to each line every second
            setInterval(function() {
                $.get('/statistics', function(data){
                    var workers = data.workers;

                    if (workers.length >= 1) {
                        throughputLine1.append(workers[0].timestamp, workers[0].throughput);
                    }

                    if (workers.length >= 2) {
                        throughputLine2.append(workers[1].timestamp, workers[1].throughput);
                    }
//                    cpuLine.append(data.timestamp, data.cpu);
                });
            }, 250);

            // Add to SmoothieChart
//            cpuChart.addTimeSeries(cpuLine);
            throughputChart.addTimeSeries(throughputLine1);
            throughputChart.addTimeSeries(throughputLine2);
        </script>

    </body>
</html>